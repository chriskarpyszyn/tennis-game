<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PONG</title>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

<script>

    var canvas;
    var canvasContext;

    var ballX = 75;
    var ballY = 75;

    var ballSpeedX = 6;
    var ballSpeedY = 6;

    var paddle1X = 0;
    var paddle1Y = 250;
    const paddle1Width = 10;
    var paddle1Height = 100;


    window.onload = function() {
        console.log("Hello World");

        const fps = 30;

        //save the canvas for dimensions and it's 2d context for drawing to it
        canvas = document.getElementById('gameCanvas');
        canvasContext = canvas.getContext('2d');

        canvas.addEventListener('mousemove', function(evt) {
            var mousePos = calculateMousePos(evt);
            paddle1Y = mousePos.y - (paddle1Height / 2);
        });
        
        setInterval(function () {
            move();
            draw();
        }, 1000/fps);

    }

    function move() {

        if (ballX >= canvas.width) {
            ballSpeedX *= -1;
        }
        if (ballX <= 0) {
            ballSpeedX *= -1;
        }
        if (ballY >= canvas.height) {
            ballSpeedY *= -1;
        }
        if (ballY <= 0) {
            ballSpeedY *= -1;
        }

        ballX += ballSpeedX;
        ballY += ballSpeedY;

    }

    function colorRect(topLeftX, topRightY, boxWidth, boxHeight, fillColor) {
        canvasContext.fillStyle = fillColor;
        canvasContext.fillRect(topLeftX, topRightY, boxWidth, boxHeight);
    }

    function colorCircle(centerX, centerY, radius, fillColor) {
        canvasContext.fillStyle = fillColor;
        canvasContext.beginPath();
        canvasContext.arc(centerX, centerY, radius, 0, Math.PI * 2, true);
        canvasContext.fill();
    }

    function draw() {

        //test
        //ballX += 50;

        //clear game view by filling it with black
        colorRect(0, 0, canvas.width, canvas.height, '#000000');
        colorRect(paddle1X, paddle1Y, paddle1Width, paddle1Height, '#FFFFFF');
       
        //draw a white circle
        colorCircle(ballX, ballY, 10, '#FFFFFF');

    }

    function calculateMousePos(evt) {
        var rect = canvas.getBoundingClientRect(), root = document.documentElement;

        //account for margins, canvas position on page, scroll amount
        var mouseX = evt.clientX - rect.left - root.scrollLeft;
        var mouseY = evt.clientY - rect.top - root.scrollTop;

        return {
            x: mouseX,
            y: mouseY
        }
    }



</script>
    
</body>
</html>